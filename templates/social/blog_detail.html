{% extends 'base.html' %}

{% block title %}{{ post.title }} - Blog Talkie{% endblock %}

{% block meta_description %}{{ post.excerpt }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-3 sm:px-4 py-8">
    <article class="bg-white rounded-lg shadow-md overflow-hidden">
        {% if post.featured_image %}
        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-80 object-cover">
        {% endif %}
        
        <div class="p-6 sm:p-10">
            <!-- Meta -->
            <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-6 pb-6 border-b border-gray-200">
                <span><i class="fas fa-calendar"></i> {{ post.published_at|date:"d F Y" }}</span>
                <span><i class="fas fa-user"></i> {{ post.author.get_full_name|default:post.author.username }}</span>
                <span><i class="fas fa-eye"></i> {{ post.views }} visualizzazioni</span>
            </div>
            
            <!-- Title -->
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-6">{{ post.title }}</h1>
            
            <!-- Content -->
            <div class="prose prose-lg prose-pink max-w-none">
                {{ post.content|linebreaks }}
            </div>
            
            <!-- Footer -->
            <div class="mt-12 pt-8 border-t border-gray-200">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <a href="{% url 'blog_list' %}" class="text-pink-600 hover:text-pink-700 font-semibold">
                        <i class="fas fa-arrow-left"></i> Torna al Blog
                    </a>
                    
                    <div class="flex gap-3">
                        <a href="https://twitter.com/intent/tweet?text={{ post.title|urlencode }}&url={{ request.build_absolute_uri }}" 
                           target="_blank" 
                           class="w-10 h-10 flex items-center justify-center bg-blue-400 text-white rounded-full hover:bg-blue-500 transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
                           target="_blank" 
                           class="w-10 h-10 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://wa.me/?text={{ post.title|urlencode }}%20{{ request.build_absolute_uri }}" 
                           target="_blank" 
                           class="w-10 h-10 flex items-center justify-center bg-green-500 text-white rounded-full hover:bg-green-600 transition">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </article>
    
    <!-- Author Box -->
    <div class="bg-white rounded-lg shadow-md p-6 mt-8">
        <div class="flex items-start gap-4">
            <img src="{% if post.author.profile.profile_picture %}{{ post.author.profile.profile_picture.url }}{% else %}/media/profile_pics/default.jpg{% endif %}" 
                 alt="{{ post.author.username }}" 
                 class="w-16 h-16 rounded-full object-cover">
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">
                    {{ post.author.get_full_name|default:post.author.username }}
                </h3>
                {% if post.author.profile.bio %}
                <p class="text-gray-600 text-sm">{{ post.author.profile.bio }}</p>
                {% else %}
                <p class="text-gray-600 text-sm">Autore su Talkie</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
