{% extends 'base.html' %}

{% block title %}Notifiche - Zone4Love{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-3 sm:px-4">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">
        <i class="fas fa-bell text-pink-600"></i> Notifiche
    </h2>

    <div class="bg-white rounded-lg shadow-md">
        {% for notification in notifications %}
        <div class="p-4 border-b border-gray-200 last:border-0 {% if not notification.is_read %}bg-pink-50{% endif %} hover:bg-gray-50 transition">
            <div class="flex items-start space-x-3">
                <a href="{% url 'profile' notification.sender.username %}">
                    <img src="{% if notification.sender.profile.profile_picture %}{{ notification.sender.profile.profile_picture.url }}{% else %}/media/profile_pics/default.jpg{% endif %}" 
                         alt="{{ notification.sender.username }}" 
                         class="w-12 h-12 rounded-full object-cover">
                </a>
                
                <div class="flex-1">
                    <p class="text-gray-800">
                        <a href="{% url 'profile' notification.sender.username %}" 
                           class="font-semibold hover:text-pink-600">
                            {{ notification.sender.get_full_name|default:notification.sender.username }}
                        </a>
                        
                        {% if notification.notification_type == 'like' %}
                            <i class="fas fa-heart text-red-500"></i> ha messo mi piace al tuo post
                        {% elif notification.notification_type == 'comment' %}
                            <i class="fas fa-comment text-blue-500"></i> ha commentato il tuo post
                        {% elif notification.notification_type == 'follow' %}
                            <i class="fas fa-user-plus text-green-500"></i> ha iniziato a seguirti
                        {% endif %}
                    </p>
                    
                    {% if notification.post %}
                    <a href="{% url 'post_detail' notification.post.id %}" 
                       class="mt-2 block text-sm text-gray-600 hover:text-pink-600">
                        "{{ notification.post.content|truncatewords:10 }}"
                    </a>
                    {% endif %}
                    
                    <p class="text-xs text-gray-500 mt-1">{{ notification.created_at|timesince }} fa</p>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="p-8 text-center">
            <i class="fas fa-bell-slash text-6xl text-gray-300 mb-4"></i>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">Nessuna notifica</h3>
            <p class="text-gray-500">Quando qualcuno interagisce con te, lo vedrai qui!</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
